{
    "config": {
        "documentation": {
            "options": [
                    "In this configuration:",
                    "- Firmware storage is on an external QSPI flash",
                    "- Root of Trust is hard coded and insecure",
                    "The flash regions are as follows:",
                    "1. Bootloader (no trace output) - 24KiB from the beginning of flash",
                    "4. KVSTORE - 2 flash sectors immediately following the bootloader",
                    "2. Active App Metadata Header - (1KiB) from the end of KVSTORE",
                    "3. Active App - From end of header to the end of flash",
                    "+--------------------------+",
                    "|                          |",
                    "|                          |",
                    "|                          |",
                    "|        Active App        |",
                    "|                          |",
                    "|                          |",
                    "|                          |",
                    "+--------------------------+ <-+ mbed-bootloader.application-start-address",
                    "|Active App Metadata Header|",
                    "+--------------------------+ <-+ update-client.application-details",
                    "|                          |",
                    "|         KVSTORE          |",
                    "|                          |",
                    "+--------------------------+ <-+ storage_tdb_internal.internal_base_address",
                    "|                          |",
                    "|        Bootloader        |",
                    "|                          |",
                    "+--------------------------+ <-+ 0",
                    "Firmware Candidate Storage is on external QSPI flash at an offset of 1 MiB.",
                    "The storage size is the size of the maximum application size (i.e. Active",
                    "Application region size) multiplied by the number of storage-locations."
            ]
        }
    },
    "macros": [
        "ARM_UC_USE_PAL_BLOCKDEVICE=1",
        "MBED_CLOUD_CLIENT_UPDATE_STORAGE=ARM_UCP_FLASHIAP_BLOCKDEVICE"
    ],
    "target_overrides": {
        "*": {
            "platform.stdio-baud-rate"             : 115200,
            "platform.stdio-flush-at-exit"         : false,
            "update-client.firmware-header-version": "2",
            "mbed-bootloader.use-kvstore-rot"      : 1
        },
        "NRF52840_DK": {
            "target.features_add": ["STORAGE"],
            "target.components_add": [
                "QSPIF",
                "FLASHIAP"
            ],
            "target.features_remove": [
                "CRYPTOCELL310"
            ],
            "target.extra_labels_remove": ["SOFTDEVICE_COMMON", "SOFTDEVICE_S140_FULL", "NORDIC_SOFTDEVICE"],
            "target.extra_labels_add": ["SOFTDEVICE_NONE"],

            "update-client.application-details": "(32*1024)",
            "mbed-bootloader.application-start-address": "(33*1024)",
            "target.macros_remove": [
                "MBEDTLS_CONFIG_HW_SUPPORT"
            ],

            "update-client.storage-address": "1024*1024*1",
            "update-client.storage-locations": 1,
            "update-client.storage-size": "1024*1024*1",
            "update-client.storage-page": 1,

            "storage_filesystem.internal_base_address" : "(24*1024)",
            "storage_filesystem.rbp_internal_size"     : "(2*4*1024)",
            "storage_filesystem.external_base_address"  : "(0x0)",
            "storage_filesystem.external_size"          : "(1024*1024*8)",
            "storage.storage_type"                      : "FILESYSTEM",
            "storage_filesystem.filesystem"             : "LITTLE",
            "storage_filesystem.blockdevice"            : "QSPIF"
        }
    }
}
